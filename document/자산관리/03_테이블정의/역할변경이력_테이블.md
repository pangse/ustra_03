````md
# 문서명: ZCM_USER_ROLE_LOG_테이블정의서.md
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산관리 시스템에서 사용자의 역할(Role) 변경 이력을 추적하고 감사(Audit) 및 관리 이력을 확보하기 위한 사용자-역할 변경 이력 테이블 정의서

---

## [1. 테이블명 및 목적]

- 테이블명: `ZCM_USER_ROLE_LOG`
- 목적: 사용자의 역할 부여 및 해제 내역을 이력으로 기록하여,  
        누가, 언제, 어떤 권한을 누구에게 부여했거나 제거했는지를 추적

---

## [2. 테이블 구조 (Prisma 기준)]

```prisma
model ZCM_USER_ROLE_LOG {
  id           String   @id @default(uuid())    // 이력 식별자
  userId       String                          // 대상 사용자 ID
  roleId       String                          // 변경된 역할 ID
  action       String                          // 부여(ASSIGN) / 회수(REVOKE)
  reason       String?                         // 변경 사유
  changedBy    String                          // 변경 수행자
  changedAt    String                          // 변경 일시
}
````

---

## \[3. 예시 데이터]

| userId  | roleId         | action | changedBy | changedAt            | reason |
| ------- | -------------- | ------ | --------- | -------------------- | ------ |
| hong002 | ROLE\_APPROVER | ASSIGN | admin     | 2025-05-22T10:00:00Z | 결재자 지정 |
| kim001  | ROLE\_USER     | REVOKE | admin     | 2025-05-23T09:30:00Z | 인사이동   |

---

## \[4. 활용 목적]

* 권한 변경 기록을 투명하게 관리하고, 사용자 오남용 방지
* 감사(Audit) 또는 보안 검토 시 활용
* 결재/전표/자산기록과의 관계를 파악할 수 있는 근거 제공

---

## \[5. 관리 기준]

* 모든 역할 변경은 이력에 자동 기록되어야 함
* `action` 필드는 ENUM 처리 권장: ASSIGN / REVOKE
* 변경자(`changedBy`)는 시스템 관리자 또는 자동정책 구분 가능
* 이 테이블은 삭제 없이 누적 관리함

---

```

이제 권한 관련 기준정보 및 모든 테이블이 완전히 정리되었어:

- 사용자: `ZCM_USER`
- 역할: `ZCM_ROLE`
- 사용자-역할: `ZCM_USER_ROLE`
- 역할-메뉴: `ZCM_ROLE_MENU_MAP`
- 역할 이력: `ZCM_USER_ROLE_LOG`
- 메뉴정의: `ZCM_MENU`

→ 다음으로 넘어갈 항목 지정해줘. 예:  
- 자산 마스터로 복귀 (`ZFI_ASSET_MASTER`)  
- 전자결재 연동 정의  
- SAP API 연계 설계  
- 테스트 시나리오 문서

원하는 방향대로 바로 진행할게.
```
