````md
# 문서명: 조직권한_연동구조정의서.md
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산관리 시스템에서 조직 단위, 사용자, 역할, 권한, 메뉴 간의 연동 관계 및 접근 제어 구조를 명확히 정의한 연동 구조서

---

## [1. 구조 정의 목적]

이 문서는 자산관리 시스템 내에서 다음과 같은 목적을 달성하기 위해 구성된다:

- 조직 단위별 사용자, 역할, 권한 제어의 논리적 기준 수립  
- 역할에 따른 메뉴 접근 제한 및 기능 통제  
- 조직 기반 자동 권한 매핑 및 결재자 자동 지정 구현 기반 제공

---

## [2. 주요 엔터티 및 관계]

```txt
조직 단위 (ZCM_ORG_UNIT)
 └── 사용자 (ZCM_USER)
      └── 사용자-역할 매핑 (ZCM_USER_ROLE)
           └── 역할 정의 (ZCM_ROLE)
                └── 역할-메뉴 매핑 (ZCM_ROLE_MENU_MAP)
                     └── 메뉴 정의 (ZCM_MENU)
````

---

## \[3. 연동 상세 설명]

### 3-1. 조직 → 사용자

| 관계                                          | 설명                 |
| ------------------------------------------- | ------------------ |
| ZCM\_USER.department → ZCM\_ORG\_UNIT.orgId | 각 사용자는 하나의 조직에 소속됨 |

### 3-2. 사용자 → 역할

| 관계                                    | 설명                  |
| ------------------------------------- | ------------------- |
| ZCM\_USER\_ROLE.userId → ZCM\_USER.id | 사용자는 1개 이상 역할 보유 가능 |

### 3-3. 역할 → 메뉴

| 관계                                         | 설명                   |
| ------------------------------------------ | -------------------- |
| ZCM\_ROLE\_MENU\_MAP.roleId → ZCM\_ROLE.id | 역할별로 접근 가능한 메뉴 정의    |
| ZCM\_ROLE\_MENU\_MAP.menuId → ZCM\_MENU.id | 접근 허용된 메뉴만 사용자에게 노출됨 |

---

## \[4. 조직 기반 자동 권한 연동 시나리오]

| 항목        | 설명                                                           |
| --------- | ------------------------------------------------------------ |
| 자동 권한 할당  | 신규 사용자 등록 시 조직 유형 기준 기본 역할 부여 (`ROLE_USER`, `ROLE_APPROVER`) |
| 결재자 자동 지정 | 부서장 역할(`ROLE_MANAGER`) 보유 사용자를 결재선에 자동 추가                    |
| 메뉴 접근 제어  | 같은 `ROLE_USER`라도 본사/지사/외부에 따라 접근 가능한 메뉴가 달라짐                 |

---

## \[5. 확장 가능한 구조 요소]

| 요소                                | 설명                              |
| --------------------------------- | ------------------------------- |
| 역할 우선순위 (`ZCM_ROLE.priority`)     | 동일 사용자가 여러 역할을 가질 때 기본 권한 판단 기준 |
| 조직장 필드 (`ZCM_ORG_UNIT.managerId`) | 결재 자동 지정 및 승인자 역활 추론            |
| 사용자 상태 (`ZCM_USER.isActive`)      | 비활성 사용자는 모든 접근 제한               |
| 역할 유효기간                           | 특정 기간 내 제한적 권한 부여 가능            |

---

## \[6. 예시 흐름 요약]

```txt
[서울 본사 → 운영팀] 소속 사용자인 김철수
  → 역할: ROLE_USER, ROLE_APPROVER
    → 접근 메뉴: 자산등록, 자산조회, 결재요청, 결재승인
```

→ 결재요청 화면 진입 시 `ROLE_APPROVER`인 운영팀 상위조직 사용자가 자동 결재자로 지정됨

---

## \[7. 정책 요약]

| 정책 항목       | 기준                                 |
| ----------- | ---------------------------------- |
| 사용자 접근권한    | 소속 조직 + 역할 기준                      |
| 메뉴 노출여부     | 역할-메뉴 매핑 기준                        |
| 기능 사용 가능 여부 | 역할별 기능 권한 플래그 (읽기/쓰기/승인 등)         |
| 자동 승인 대상    | 상위 조직장 + `ROLE_APPROVER` 조건 만족 사용자 |

---

```
```
