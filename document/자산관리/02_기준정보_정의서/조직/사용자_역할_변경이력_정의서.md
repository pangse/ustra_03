좋아. 그럼 지금부터 **차근차근 하나씩**, 각 정의서를 **단계별로 자세히** 진행할게.
첫 번째 항목은 다음과 같아:

---

## ✅ 1단계: 역할변경이력\_정의서.md

> 사용자에게 역할이 부여되거나 회수되었을 때의 변경 이력을 감사 및 통제를 위해 기록하는 업무 정의서

곧바로 상세하게 작성해서 보여줄게.


````md
# 문서명: 역할변경이력_정의서.md
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산관리 시스템에서 사용자에게 부여되거나 회수된 역할(Role)의 변경 이력을 기록하고, 감사 및 접근 제어의 근거로 활용하기 위한 업무 정의 문서

---

## [1. 정의]

**역할 변경 이력(Role Change Log)**은 시스템 사용자에게  
**역할이 부여(ASSIGN)되거나 회수(REVOKE)**된 시점, 사유, 처리자를 기록하는 구조이다.  
이는 **권한 변경의 투명성 확보**, **감사 대응**, **오남용 방지**, **역할기반 접근 제어 정책의 근거**로 사용된다.

---

## [2. 역할 변경이 필요한 주요 상황]

| 상황 | 설명 |
|------|------|
| 신규 사용자 등록 | 최초 역할 부여 (예: ROLE_USER, ROLE_VIEWER) |
| 관리자 승격 | 일반 사용자에게 ROLE_ADMIN 또는 ROLE_APPROVER 부여 |
| 조직 이동 | 기존 부서 권한 회수 후 신규 역할 부여 |
| 인사 퇴사 처리 | 모든 역할 회수 및 접근 제한 기록 |
| 역할 조정 | 관리자가 직접 수동으로 역할 조정한 경우 |

---

## [3. 주요 기록 항목]

| 항목명 | 설명 |
|--------|------|
| userId | 대상 사용자 ID |
| roleId | 변경된 역할 ID |
| action | ASSIGN(부여), REVOKE(회수) |
| reason | 변경 사유 (예: 조직 이동, 보안 등급 변경) |
| changedBy | 역할을 변경한 운영자 ID |
| changedAt | 변경 처리 시각 (ISO8601) |

---

## [4. 연동 테이블 및 흐름]

```txt
ZCM_USER
 └─ ZCM_USER_ROLE_LOG   ← (이력 기록용, 삭제 불가)
 └─ ZCM_USER_ROLE       ← (현재 부여된 역할 목록)
       ↓
    ZCM_ROLE
````

* 현재 역할 상태는 `ZCM_USER_ROLE`
* 변경 이력은 `ZCM_USER_ROLE_LOG`에 모두 저장 (수정·삭제 불가)

---

## \[5. 업무 활용 시나리오]

### ▶ 사례 1: 팀장이 결재자 역할을 요청한 경우

* ROLE\_APPROVER 부여됨
* action = ASSIGN / reason = "결재권한 부여 요청"

### ▶ 사례 2: 조직 이동으로 기존 권한 회수 후 신규 역할 부여

* 이전 ROLE\_USER 회수 → REVOKE
* 새로운 부서 기준 ROLE\_USER 부여 → ASSIGN

---

## \[6. 관리 기준 및 유의사항]

* 모든 역할 변경은 반드시 이력 로그로 남아야 함
* 시스템 자동 변경이더라도 `changedBy = SYSTEM`으로 기록
* 감사 시점에 특정 사용자의 역할 변경 이력을 소급 확인할 수 있어야 함
* 한 사용자가 여러 역할을 순차적으로 부여받은 경우 시간순으로 정렬

---

## \[7. 확장 고려 사항]

* 역할 유효기간(`validFrom`, `validTo`)을 기반으로 자동 회수 기록 가능
* 시스템 이벤트 기반 자동 역할 부여 시 `sourceEvent` 필드 확장 가능
* 역할 변경 시 알림 기능 연계 가능 (이메일 또는 시스템 메시지)

---

```

이 정의서를 기준으로 다음은 해당 이력을 저장하는 테이블 `ZCM_USER_ROLE_LOG_테이블정의서.md`를 구성할 수 있어.  
→ 이어서 생성할까?
```
