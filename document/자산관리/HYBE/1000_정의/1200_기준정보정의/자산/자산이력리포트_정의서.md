좋아. 지금까지 정의된 이력 체계를 마무리하면서,
# 문서명: 자산이력리포트_정의서.md
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산 통합 이력(`ZFI_ASSET_LOG`) 기반으로 자산 단위의 상태·위치·이동·수선·리폼 이력을 정리하여 사용자에게 리포트 형태로 출력하는 구조 정의서

---

## [1. 정의]

자산이력리포트는 자산 단위로 발생한 모든 활동을 시간순으로 정렬하여  
**상태 변화, 이동 흐름, 사용 내역, 수선 및 리폼 처리 이력**을  
한 눈에 확인 가능하도록 **표, 타임라인, 또는 PDF 문서 형태로 출력**하는 기능이다.

---

## [2. 출력 대상 테이블 및 기준]

| 데이터 소스 | 기준 테이블 | 설명 |
|-------------|-------------|------|
| 자산 마스터 | `ZFI_ASSET_MASTER` | 자산 기본정보 (명칭, 코드, 상태, 위치 등) |
| 자산 이력 | `ZFI_ASSET_LOG` | 모든 행위 이력 |
| 이동 상세 | `ZFI_ASSET_MOVEMENT` | 수동 이동 내역 |
| 위치감지 | `ZFI_ASSET_POSITION_LOG` | 자동 위치감지 로그 |
| 수선 내역 | `ZFI_ASSET_REPAIR` | 수리 시기, 비용, 담당자 |
| 리폼 이력 | `ZFI_ASSET_REFORM` | 기존-신규 연결, 사유 |
| 대여 기록 | `ZFI_ASSET_RENT` | 대여 요청, 반납일 |

---

## [3. 출력 레이아웃 예시]

### 📝 기본 구성
1. 자산 기본 정보
2. 이력 타임라인 (등록 → 이동 → 수선 → 리폼 → 대여 → 반납 → 폐기 등)
3. 상세 표 형태 이력 로그 (`ZFI_ASSET_LOG`)
4. 첨부파일 썸네일 (사진, 문서 등)

### 📄 출력 형식

- Web Table Grid (자산별 이력 조회 화면)
- PDF 리포트 다운로드
- Excel 내보내기 (`ZFI_ASSET_LOG_VIEW`)
- SAP Archive 연동 가능

---

## [4. 정렬 및 필터 조건]

| 조건 | 설명 |
|------|------|
| logType | 유형별 필터링 (REPAIR만 보기 등) |
| 기간 | 최근 30일, 월별 보기 |
| 상태 변화 | 특정 상태 변화 이력만 보기 (ACTIVE → DISPOSED 등)
| 사용자 | 처리자 기준 필터링 (hong001만 보기 등)

---

## [5. 활용 시나리오]

- 자산 반출/회수 정당성 확인
- 수선/리폼 빈도에 따른 예산 계획
- 감사 대응용 자산 전체 이력 PDF 제출
- 관리자별 처리 건수 통계 기반 KPI 추출

---

## [6. 확장 고려 사항]

- UI 타임라인 뷰 구성 (일자별 라벨)
- 알림 이력 연동 (대여 미반납 알림과 연결)
- SAP 자산 전환 이력 출력 연계 가능
- 리포트 인쇄용 전용 템플릿 구성

---
