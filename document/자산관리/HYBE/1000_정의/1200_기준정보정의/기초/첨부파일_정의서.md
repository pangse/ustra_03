```md
# 문서명: 첨부파일_정의서.md
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산관리 시스템 내 수선, 리폼, 대여 등의 업무 처리 중 필요한 첨부파일 구조를 정의하고, 공통 첨부파일 테이블 연동 기준을 정리한 정의서

---

## [1. 정의]

**첨부파일(File Attachment)**은 자산과 관련된 업무 처리 과정에서 발생하는  
도면, 계약서, 사진, 작업 결과 보고서 등의 **외부 파일 자료를 시스템에 등록하여**  
해당 업무의 정합성, 증빙성, 추적성을 확보하는 구조이다.

---

## [2. 적용 업무 및 대상 테이블]

| 업무 영역 | 연계 테이블 |
|-----------|-------------|
| 자산 리폼 | `ZFI_ASSET_REFORM_FILE` |
| 자산 수선 | `ZFI_ASSET_REPAIR_FILE` |
| 자산 대여 | `ZFI_ASSET_RENT_FILE` (예정) |
| 자산 회수 확인서 | 연계 예정 |
| 결재 첨부 | `ZFI_APPROVAL_FILE` (예정)

---

## [3. 공통 첨부파일 구조 항목]

| 필드명 | 설명 |
|--------|------|
| id | 첨부파일 고유 ID (UUID) |
| refType | 참조 테이블 유형 (예: ASSET_REPAIR, ASSET_REFORM 등) |
| refId | 참조 대상 ID (예: repairId, reformId) |
| fileName | 원본 파일명 |
| filePath | 저장 위치 또는 URL 경로 |
| uploadedBy | 업로드 사용자 ID |
| uploadedAt | 업로드 시각 |
| fileType | MIME 타입 또는 확장자 (pdf, png, jpg 등) |
| description | 설명 또는 용도 (선택) |

---

## [4. 저장 방식 및 경로 예시]

- 로컬 파일시스템 저장: `/upload/repair/2025/repair_001.pdf`
- 클라우드 저장 URL: `https://cdn.hybe.com/assets/reform/reform_023.jpg`
- 파일 정렬/보관은 업무별 연동 기준으로 구분

---

## [5. 관리 기준]

- 모든 첨부파일은 삭제 불가, `isActive = false` 처리 가능
- 파일 경로는 백업/보안 설정 기준으로 통제되어야 함
- 파일 크기 제한 (예: 10MB) 및 확장자 제한 필요 (관리자 설정)

---

## [6. 확장 고려 사항]

- 썸네일 자동 생성 경로(`thumbnailPath`) 필드 추가
- 첨부파일 접근/다운로드 이력 로그 (`FILE_ACCESS_LOG`) 테이블 분리 가능
- 암호화 저장 방식 설정 가능 (민감정보 포함 파일 시)

---
```

→ 다음으로 `자산이력_정의서.md`로 이어서 상세하게 정리해줄게. 계속할까?
