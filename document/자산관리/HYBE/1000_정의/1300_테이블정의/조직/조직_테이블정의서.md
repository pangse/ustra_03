# 문서명: ZCM_ORG_UNIT_테이블정의서.md (SAP 연동 확장)
- 작성일: 2025-05-23
- 작성자: 송영근
- 내  용: 자산관리 시스템에서 사용자, 자산, 결재 흐름 등을 조직 단위로 통제하기 위한 계층형 조직 테이블 정의서이며, SAP의 회사코드 및 코스트센터 연동 필드를 포함함

---

## [1. 테이블명 및 목적]

- 테이블명: `ZCM_ORG_UNIT`
- 목적: 조직을 계층 구조로 관리하고, SAP 시스템의 회사코드 및 코스트센터 정보를 연계하여  
        자산, 사용자, 결재, 권한 등을 조직 단위로 통합 관리하기 위한 기준 테이블

---

## [2. 테이블 구조 (Prisma 기준)]

```prisma
model ZCM_ORG_UNIT {
  orgId          String   @id @default(uuid())      // 조직 고유 ID
  orgName        String                             // 조직명
  parentOrgId    String?                            // 상위 조직 ID (계층 구조)
  orgType        String                             // 조직 유형 (COMPANY / BRANCH / DEPT / TEAM)
  sapCompanyCode String?                            // SAP 회사코드 (예: 1000)
  sapCostCenter  String?                            // SAP 코스트센터 (예: 50100230)
  orgManagerId   String?                            // 조직장 사용자 ID (ZCM_USER.userId)
  isActive       Boolean  @default(true)            // 사용 여부
  createdBy      String
  createdAt      String
  updatedBy      String?
  updatedAt      String?
}
````

---

## \[3. 연관 테이블 관계]

| 필드명                            | 참조 테이블           | 설명       |
| ------------------------------ | ---------------- | -------- |
| parentOrgId                    | `ZCM_ORG_UNIT`   | 상위 조직 구성 |
| orgManagerId                   | `ZCM_USER`       | 조직장 지정   |
| sapCompanyCode / sapCostCenter | SAP Public Cloud | 외부 연동 기준 |

---

## \[4. 예시 구조]

```
HYBE (sapCompanyCode = 1000)
 └ 서울 본사 (sapCostCenter = 50100001)
     └ 운영본부
         └ 자산관리팀
 └ 부산 지사 (sapCostCenter = 50100002)
```

---

## \[5. 활용 시나리오]

* 자산 등록 시 `orgId` 기준으로 조직 소유 기록
* 결재선 자동 구성 시 `orgManagerId` 기반 매핑
* 사용자 생성 시 소속 조직 자동 매핑
* SAP 연동 자산 이관 시 회사코드/코스트센터 기준값 전송

---

## \[6. 관리 기준]

* 조직은 계층 구조로 관리되며 상위-하위 트리 구성 필수
* `isActive = false`인 조직에는 사용자/자산 매핑 불가
* SAP 연동이 필요한 경우 `sapCompanyCode`, `sapCostCenter` 필드에 마스터 데이터 제공 받아 등록 필요

---

## \[7. 확장 고려 사항]

* 조직별 자산 보유 집계, 이동이력 통계 구성
* SAP 연동 확장 시 `SAP_ORG_UNIT_ID` 별도 필드 추가 가능
* 예산/결재한도 관리 시 조직 단위 권한 설정 기반 확장 가능

---

```

→ 이 테이블은 SAP의 조직정보 구조와 자산관리 시스템의 계층을 유연하게 연결할 수 있어.  
이어서 `ZCM_ORG_UNIT`을 기반으로 한 **조직 관리 화면 설계 문서**나 **조직별 통계 화면**도 구성 가능해.  
다음으로 이어서 생성해줄까?
```
